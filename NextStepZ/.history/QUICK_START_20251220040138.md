# Quick Start Guide - Token-Based Public Profile Sharing

## Summary of Implementation

Your application now has a complete **unique token-based public profile sharing system**. Each account has a unique shareable token that allows others to view their public profile.

## Files Modified/Created

### ✅ New Files Created
- **`frontend/app/public-profile/[token]/page.tsx`** - Dynamic route component for viewing profiles by token

### ✅ Modified Files  
- **`frontend/lib/profile-context.tsx`** - Added public profile data management
- **`backend/src/modules/profile/profile.controller.ts`** - Reordered routes for correct matching

### ✅ Already Working (No Changes Needed)
- **`backend/src/modules/profile/profile.service.ts`** - All methods already implemented correctly
- **`backend/prisma/schema.prisma`** - PublicProfile model with shareToken already defined

## How to Use

### For Users (Frontend)
1. Login to your account
2. Go to Profile page
3. Click the "Share" button
4. Get your unique profile link: `https://yourapp.com/public-profile/{token}`
5. Share this link with anyone
6. Anyone with the link can view your public profile

### For Developers

**Starting the Application:**

```bash
# Terminal 1 - Backend
cd backend
npm install
npx prisma migrate dev  # Ensure migrations are applied
nest start --watch

# Terminal 2 - Frontend  
cd frontend
npm install
npm run dev
```

**Token Format:**
- Auto-generated using CUID (Collision-resistant ID)
- Example: `cl9x2y3z4a5b6c7d8e9f0g1h2`
- One unique token per user (in PublicProfile table)

## API Endpoints Reference

```
# Authentication Required
POST   /profiles/public              Get or create public profile
POST   /profiles/public/toggle       Toggle public profile visibility
PUT    /profiles/me                  Update your profile
GET    /profiles/me                  Get your profile

# Public (No Auth Required)
GET    /profiles/public/share/:token Get public profile by token
GET    /profiles/public/user/:userId Get public profile by user ID
GET    /profiles/:profileId          Get profile by ID
```

## Testing Checklist

- [ ] User can login
- [ ] Can create/get public profile (token auto-generated)
- [ ] Can view own profile sharing page
- [ ] Can copy the share link
- [ ] Can open link in incognito/private browser
- [ ] Public profile loads correctly
- [ ] View count increments on each visit
- [ ] Can toggle profile visibility
- [ ] Inactive profile shows error message
- [ ] Profile displays all sections (bio, skills, experience, etc.)

## Key Features

✅ **Unique Tokens** - Each account gets a CUID-based token  
✅ **Shareable Links** - Simple, memorable format  
✅ **View Tracking** - Automatic view count increment  
✅ **Privacy Control** - Can toggle public/private anytime  
✅ **Error Handling** - Proper error pages for missing/inactive profiles  
✅ **Responsive Design** - Works on all devices  
✅ **Social Links** - Display user's social media profiles  

## Troubleshooting

### "Profile not found" error
- Verify token is correct
- Check profile exists in database
- Confirm public profile is active

### Token not showing
- Ensure user is logged in
- Call POST `/profiles/public` endpoint
- Check database for PublicProfile record

### Profile page not loading
- Check browser console for errors
- Verify backend is running
- Check API_URL is correct in frontend

## Database Schema

The `PublicProfile` model stores:
- `id` - Unique profile ID
- `userId` - Linked to User
- `profileId` - Linked to Profile
- `shareToken` - Unique sharing token (CUID)
- `isActive` - Visibility flag
- `viewCount` - Number of views
- Timestamps

## Security Notes

✅ Tokens are cryptographically secure  
✅ No sensitive data exposed publicly  
✅ Can disable sharing anytime  
✅ Rate limiting recommended (future)  

---

**Questions?** Check the error logs in your terminal or browser console for detailed error messages.
